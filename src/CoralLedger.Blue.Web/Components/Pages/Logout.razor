@page "/logout"
@using System.Net.Http.Json
@inject NavigationManager NavigationManager
@inject HttpClient HttpClient
@rendermode InteractiveServer

<PageTitle>Logging out - CoralLedger Blue</PageTitle>

<div class="auth-page">
    <div class="auth-container">
        <div class="auth-card">
            <div class="auth-header">
                <h1>
                    <i class="bi bi-box-arrow-right"></i>
                    Logging out...
                </h1>
            </div>
        </div>
    </div>
</div>

@code {
    protected override async Task OnInitializedAsync()
    {
        try
        {
            // Call logout endpoint to clear cookie
            await HttpClient.PostAsync("/api/auth/logout", null);
        }
        catch
        {
            // Ignore errors - still redirect to login
        }
        
        // Redirect to login page with full page reload to clear state
        NavigationManager.NavigateTo("/login", forceLoad: true);
    }
}
